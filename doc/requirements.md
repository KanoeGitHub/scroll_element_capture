# 🧾 Chrome拡張「Scroll Element Capture」仕様書（ドラフト）

## 🏷 プロジェクト名

**Scroll Element Capture**  
Webページ内のスクロール可能な領域を選択して、**その全体をキャプチャできる**Chrome拡張。

---

## 対象ブラウザ
- Google Chrome
- Microsoft Edge（Chromium版）
- その他Chromiumベースのブラウザ（Brave, Opera等）

## 🎯 目的

通常の「ページ全体スクリーンショット」では対応できない  
**Webページ内のスクロール可能な要素（コンテナ）**を対象に、  
その**全体を画像として保存する機能**を提供する。

---

## 🧩 主要機能

### ✅ 要素の選択
- 拡張機能起動で、スクロール可能な領域をマウスオーバー選択
- ハイライト表示あり（視覚的に明示）
- クリックで選択を確定

### 📸 スクロールキャプチャ
- 自動スクロールで中身を分割キャプチャ
- キャプチャ画像をCanvas上で合成
- **1枚の画像（PNG/JPEG）**として保存
- 解像度設定（72dpi, 150dpi, 300dpi, 600dpi）に対応
- ブラウザのズームレベルに応じた適切なキャプチャ

### 💾 出力
- 生成画像を自動ダウンロード
- ファイル形式・ファイル名は今後カスタマイズ可能予定
- 解像度設定の保存機能

---

## 🛠 技術スタック

| 技術              | 用途                         |
|-------------------|------------------------------|
| Manifest v3        | Chrome拡張の基盤             |
| JavaScript         | DOM操作、キャプチャ制御など |
| HTML/CSS           | UI構築、エフェクト           |
| Canvas API         | 画像合成・出力               |
| chrome.tabs API    | タブ操作、スクロール処理     |
| chrome.storage API | 設定の保存・読み込み         |

---

## 📁 フォルダ構成

```
scroll-element-capture/ 
├─ manifest.json
├─ background.js 
├─ popup.html 
├─ popup.js 
├─ content.js 
├─ selector.js 
├─ capturer.js 
├─ styles/ 
│ └─ selector.css 
└─ assets/ 
  └─ icons/
```

---

## 🧪 制限事項・現在の仕様

- 無限スクロールには未対応
- **現在表示されているDOM要素のみ**をキャプチャ対象
- アニメーション・動画など動的要素は正確にキャプチャできない可能性あり
- iframe内のスクロール可能領域は非対応
- 動的に生成されるスクロール可能領域は、現在の読み込み値を上限とする
- ファイル名は「scrollcap_YYYYMMDDHHMMSS.png」形式
- 日本語のファイル名は非対応
- デフォルトの保存形式はPNG（設定でJPEGに変更可能）
- エラーメッセージはポップアップ内に日本語で表示
- キャプチャ失敗時は「予期せぬエラー」を表示
- メモリ制限時は「メモリが足りません」を表示
- 大きすぎるスクロール領域は非対応
- 解像度設定は72dpi, 150dpi, 300dpi, 600dpiから選択可能
- 解像度設定は自動保存され、次回起動時にも維持される

## 🎯 対応ブラウザ

- Google Chrome
- Microsoft Edge（Chromium版）
- その他Chromiumベースのブラウザ（Brave, Opera等）

## 💾 出力設定

- デフォルトの保存先はブラウザのダウンロードフォルダ
- 将来的に保存先の指定を可能にする予定
- 解像度設定は自動保存される

---

## 🧩 将来的な拡張・対応予定

### 🔄 無限スクロール対応
- ページ末端まで自動スクロール → 要素が追加されなくなるまで継続
- スクロール回数上限で暴走防止

### 📐 キャプチャ範囲の指定
- 高さ・px数で範囲を制限
- マウスドラッグで手動指定するUI

### 🧩 複数要素キャプチャ
- 複数のスクロール可能な領域を一度にキャプチャ
- キャプチャ順序の指定機能 